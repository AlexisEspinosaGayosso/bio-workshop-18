## 4. Porting to HPC systems

 [\<\< Part 3](https://github.com/PawseySC/bio-workshop-18/blob/master/3.wgs_workflow.md)
 | [TOC](https://github.com/PawseySC/bio-workshop-18/blob/master/TableOfContents.md) |
 [Part 5 \>\>](https://github.com/PawseySC/bio-workshop-18/blob/master/5.sincell_workflow.md)
______


### Before we start
So far we have learnt how to use Docker to run containerised applications and workflows in any Linux/Mac/Windows machines.  
However, some features of Docker make it not suitable for running on HPC systems, so that specifically designed container engines are required. Here we will introduce the use of [Shifter](https://github.com/NERSC/shifter).

Shifter is installed in all [Pawsey](https://www.pawsey.org.au) HPC machines and can be loaded in the shell environment by means of the module system:

     module load shifter

Some of the features described in this Episode are specific to the Shifter installation at Pawsey; these will be marked with a prepended double asterisk \*\*.

Scripts covering some of the examples in this Episode are in a subdirectory:

    cd episode4_porting_to_HPC/


---
### Pulling an image
Let us see how to pull the images that we got through Docker in [Episode 1](https://github.com/PawseySC/bio-workshop-18/blob/master/1.containers.md) and [Episode 2](https://github.com/PawseySC/bio-workshop-18/blob/master/2.fastqc.md):
- Ubuntu from Docker Hub
- FastQC from QUAY Hub

Pulling from Docker hub with Shifter is essentially the same as with Docker:

    shifter pull ubuntu

\*\* On the other hand, pulling from QUAY Hub requires having an account on https://quay.io 
and providing the corresponding credentials at pull time:

    shifter pull --login quay.io/biocontainers/fastqc:0.11.7--4

\*\* Forgetting to provide the `--login` flag will result in an execution failure and an error message.  
\*\* At the time of writing, all registries but Docker Hub require login credentials on Pawsey HPC systems.


---
### Running an image



---
### Other Shifter commands
Shifter currently comes with a small sub-set of the commands available to Docker; yet these are enough to run containers in a HPC environment. 
- `shifter images` : list locally available images
- `shifter rmi <REPO NAME>` : remove local image with given repo name
- `shifter help` : output help info
- `shifter help <COMMAND>` : output command-specific help info


______
 [\<\< Part 3](https://github.com/PawseySC/bio-workshop-18/blob/master/3.wgs_workflow.md)
 | [TOC](https://github.com/PawseySC/bio-workshop-18/blob/master/TableOfContents.md) |
 [Part 5 \>\>](https://github.com/PawseySC/bio-workshop-18/blob/master/5.sincell_workflow.md)
